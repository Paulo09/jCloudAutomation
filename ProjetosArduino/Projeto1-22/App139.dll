#include <SPI.h>
#include "EthernetSupW5100.h"
byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
IPAddress ip(192,168,0,101);
EthernetServer server(80);
int Canal3 = 3;
int Canal1 = 1;
int Canal2 = 2;
int Canal4 = 4;

void setup(){
EthernetSupW5100.begin(mac, ip);
server.begin();
//Configurando as Portas dos Botoes
pinMode(Canal3,OUTPUT);
pinMode(Canal1,OUTPUT);
pinMode(Canal2,OUTPUT);
pinMode(Canal4,OUTPUT);

//Estado incial Portas
digitalWrite(Canal3,LOW);
digitalWrite(Canal1,LOW);
digitalWrite(Canal2,LOW);
digitalWrite(Canal4,LOW);

//Declarando os Botoes
EthernetSupW5100.addButton(Canal3,"Ligar Arcondicionado","Desligar Arcondicionado",FLIP_BUTTON);
EthernetSupW5100.addButton(Canal1,"Ligar Ventilador","Desligar Ventilador",FLIP_BUTTON);
EthernetSupW5100.addButton(Canal2,"Ligar Televisao","Desliga Televisao",FLIP_BUTTON);
EthernetSupW5100.addButton(Canal4,"Desliga Maquina de Lavar","Liga Maquina de Lavar",FLIP_BUTTON);

}
void loop(){
EthernetSupW5100.loadHtml(server);
//Verifica se algum botao foi pressionado
int lastButton = EthernetSupW5100.getLastClickedButton();
byte state = EthernetSupW5100.getButtonState(lastButton);
//Executa o comando conforme o botao clicado
if(lastButton == Canal3){digitalWrite(Canal3,state);};
if(lastButton == Canal1){digitalWrite(Canal1,state);};
if(lastButton == Canal2){digitalWrite(Canal2,state);};
if(lastButton == Canal4){digitalWrite(Canal4,state);};

}
